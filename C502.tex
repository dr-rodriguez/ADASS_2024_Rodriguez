% This is the ADASS_template.tex LaTeX file, 19th Sep 2019.
% It is based on the ASP general author template file, but modified to reflect the specific
% requirements of the ADASS proceedings.
% Copyright 2014, Astronomical Society of the Pacific Conference Series
% Revision:  14 August 2014

% To compile, at the command line positioned at this folder, type:
% latex ADASS_template
% latex ADASS_template
% dvipdfm ADASS_template
% This will create a file called ADASS_template.pdf

\documentclass[11pt,twoside]{article}

% Do NOT use ANY packages other than asp2014. 
\usepackage{asp2014}

\aspSuppressVolSlug
\resetcounters

% References must all use BibTeX entries in a .bibfile.
% References must be cited in the text using \citet{} or \citep{}.
% Do not use \cite{}.
% See ManuscriptInstructions.pdf for more details
\bibliographystyle{asp2014}

% The ``markboth'' line sets up the running heads for the paper.
% 1 author: "Surname"
% 2 authors: "Surname1 and Surname2"
% 3 authors: "Surname1, Surname2, and Surname3"
% >3 authors: "Surname1 et al."
% Replace ``Short Title'' with the actual paper title, shortened if necessary.
% Use mixed case type for the shortened title
% Ensure shortened title does not cause an overfull hbox LaTeX error
% See ASPmanual2010.pdf 2.1.4  and ManuscriptInstructions.pdf for more details
\markboth{Rodriguez et al.}{Insights from a Partnership on Astronomical Archives}

\begin{document}

\title{Insights from a 30-Year international Partnership on Astronomical Archives}

% Note the position of the comma between the author name and the 
% affiliation number.
% Authors surnames should come after first names or initials, eg John Smith, or J. Smith.
% Author names should be separated by commas.
% The final author should be preceded by "and".
% Affiliations should not be repeated across multiple \affil commands. If several
% authors share an affiliation this should be in a single \affil which can then
% be referenced for several author names. If only one affiliation, no footnotes are needed.
% See ManuscriptInstructions.pdf and ASP's manual2010.pdf 3.1.4 for more details
\author{David~R.~Rodriguez,$^1$ M.~Arevalo,$^2$ P.~Dowler,$^3$ J.~Espinosa,$^2$ B.~McLean,$^1$ and C.~Willot$^3$}
\affil{$^1$Space Telescope Science Institute, Baltimore, MD, USA; \email{drodriguez@stsci.edu}}
\affil{$^2$Starion Spain for ESA, Madrid, Spain}
\affil{$^3$CADC, National Research Council Canada, Victoria, BC, Canada}

% This section is for ADS Processing.  There must be one line per author. paperauthor has 9 arguments.
\paperauthor{David~R.~Rodriguez}{drodriguezl@stsci.edu}{0000-0003-1286-5231}{Space Telescope Science Institute}{CSB}{Baltimore}{MD}{Postal Code}{USA}
\paperauthor{María~Arévalo}{Maria.Arevalo@ext.esa.int}{0000-0001-8102-0916}{Starion Spain for ESA}{SCI-MS}{Villanueva de la Cañada}{Madrid}{28692}{Spain}
\paperauthor{Patrick~Dowler}{patrick.dowler@nrc-cnrc.gc.ca}{0000-0001-7011-4589}{National Research Council}{CADC}{Victoria}{BC}{V9E 2E7}{Canada}
\paperauthor{Javier~Espinosa}{javier.espinosa@ext.esa.int}{0000-0002-9956-4433}{Starion Spain for ESA}{SCI-MS}{Villanueva de la Cañada}{Madrid}{28692}{Spain}
\paperauthor{Brian~McLean}{mclean@stsci.edu}{0000-0002-8058-643X}{Space Telescope Science Institute}{CSB}{Baltimore}{MD}{Postal Code}{USA}
\paperauthor{Chris~Willot}{Christopher.Willott@nrc-cnrc.gc.ca}{0000-0002-4201-7367}{National Research Council}{CADC}{Victoria}{BC}{V9E 2E7}{Canada}

% There should be one \aindex line (commented out) for each author. These are used to
% build up the author index for the Proceedings. The surname must come first, followed by
% initials. Note the use of ~ before each initial to control spacing.
% The \author entries (see above) have surname last. These \aindex entries have
% surname first.
% The Aindex.py command willl create them for you after you have constructed the \author
% The first entry should be the first author, for bold-facing the author index page-reference

%\aindex{Rodriguez,~D.~R.}
%\aindex{Arevalo,~M.}
%\aindex{Dowler,~P.}
%\aindex{Espinosa,~J.}
%\aindex{McLean,~B.}
%\aindex{Willot,~C.}


\begin{abstract}
In an era where astronomical data is expanding at an unprecedented rate, the importance of data sharing and accessibility among astronomy archives cannot be overstated. 
Since the 1990s, an international partnership between the Space Telescope Science Institute (STScI), the European Space Astronomy Centre (ESAC), 
and the Canadian Astronomy Data Centre (CADC) has been focused on this endeavor, facilitating the exchange of data from the Hubble and James Webb Space Telescopes.

We will present how this collaboration has evolved over time, highlighting key milestones and innovations in decision-making, communication, and technology. 
Additionally, we will discuss some of the challenges we have encountered and the strategies we employed to overcome them, offering insights that could benefit future archive collaborations.
\end{abstract}

\section{Introduction}

When working towards supporting an archive for the Hubble Space Telescope, we had three main partners that worked to make this a reality.
These are the Space Telescope Science Institute (STSc), the European Space Astronomy Centre (ESAC), and the Canadian Astronomy Data Centre (CADC).

The Space Telescope Science Institute (STScI) is located at Baltimore, MD, USA and was established in 1981.
The Mikulski Archive for Space Telescopes (MAST) established in 1997 to serve IUE and HST data, with a focus on UV/Optical/Near-IR observatories. MAST currently hosts data from over 20 missions.

The Canadian Astronomy Data Centre (CADC) is located near Victoria, Canada and was established in 1986.
CADC serves active Canadian Space Agency (CSA) missions (including JWST), HST and many ground-based telescope archives.
CADC also runs the CANFAR Science Platform for collaborative science analysis of JWST and other missions.

The European Space Astronomy Centre (ESAC) is located near Madrid, Spain. Though at the start of this collaboration in the early 1990s, this partnership was with the Space Telescope European Coordination Facility (ST-ECF) located at ESO in Garching, Germany. 
The ST-ECF was active from 1984 to 2011 and the Archive moved to ESAC at that time. 
Since then the ESAC Science Data Centre (ESDC) serves data from ESA's space science missions (including HST \& JWST).

\section{Collaboration History}

When we started working on sharing data, we started with a focus on all public HST data. 
With the start of "On-the-Fly-Calibration", we focused on sharing raw data allowing each archive would run their own pipeline. 
We continued to collaborate at the instrument level to help design the pipeline, build products, and address any issues.

When building the Hubble Legacy Archive (HLA), we split the processing of the various instruments and modes across the archives. 
STScI took care of ACS and NICMOS imaging; CADC processed WFPC2; and ST-EFC and ESA took care of ACS and NICMOS grism data through 2010. 

The need for a more robust mechanism to share our data started to arise in the 2010s as we discovered limitations with the On-the-Fly-Calibration approach. 
Because each archive had their own implementation of the pipeline, differences could arise depending on software versions, calibration reference files, or even hardware differences. 
As such, there was no single official best reduction of any HST product. 
In addition, each partner generated their own set of metadata to describe the data and provide search capabilities to their users and this provided an inconsistent description and experience.

This spurred the design of the HST Partner Consolidated Pipeline Project, which we will describe in the next section.

\section{Consolidated Pipeline Project}

The Consolidated Pipeline Project was designed to handle the discrepancies of HST reduction across the three partners. 
The goal was to have a single archive run the pipeline and produce the highest level products. 
The other two archives would become data mirrors and harvest all the observation metadata and public data. 
This ensures that all three archives host the same copy of the products. 

In our setup today, STScI runs the pipelines to reduce both HST and JWST observations. 
CADC and ESAC harvest metadata and public data for these missions, roughly every hour. 
ESAC provides access to proprietary data through their interface via a redirect back to STScI

\subsection{Tools}

To facilitate the sharing of metadata across archives we made use of the Common Archive Observation Model (CAOM; https://github.com/opencadc/CAOM/). 
CAOM was developed by CADC to handle metadata for astronomical observations across the electromagnetic spectrum. 
In CAOM, files are grouped as products of an Observation and elements, such as calibration levels, filter information, footprint formats, etc are standardized. 
Because of this standardization, multiple missions can be searched with the same keywords empowering multi-mission archives. 
It is also extensible with supplementary information such as providing mission-specific instrument keywords, target keywords, and more. 
A working draft is available and CAOM is on track to become an IVOA standard. 

Another mayor tool was the the Metadata \& File harvesting software, which focus on actually transferring the metadata (CAOM Observations in XML format) and the actual mission files themselves. 
The tools were originally developed by CADC, with contributions from ESAC, and are available as open source tools at https://github.com/opencadc.
These tools are installed at CADC and ESAC and allows us to list and get metadata and files from a running CAOM service at STScI. 

\subsection{Communication}

We have regular checkouts to continue to foster this partnership. 
We have a shared Slack channel for asynchronous communication and discussions. 
We also host bi-weekly standup meetings to check on status and go over any major issues. 
These meetings are hosted via Zoom at a time that works for all three partners. 
Finally, we have an annual Archive Coordination Meeting (ACM). 
The ACM typically lasts 2 days and we go over major points and plan out future work. 
For more long-term record keeping, STScI host an Outerspace website to store meeting notes and other documenation.

In addition to these communication channels, we also have automated tests that validate the content of each other's archives. 
These either send emails or slack messages for us to review.
This has been particularly useful at identifying discrepancies or delays in harvesting across the archives. 

\section{Lessons Learned}

Here we list the various lessons leanred throughout this 30+ year partnership.

\textbf{Agree on standards to use}. 
We decided to use Common Archive Observation Model (CAOM) to handle metadata sharing. 
The metadata serialized as xml files for ease of transfer. 
We keep having discussions on best way to translate mission data into CAOM. 
And we make use of the Table Access Protocol (TAP) to check status across the archives.

\textbf{Communicate expectations}.
Early on we agreed to mirror only public data (eg, no proprietary/exclusive access data). 
We make sure to communicate timelines, data volume, ingest rates, and what we expect to see for them. 

\textbf{Share tools and resources}. 
CAOM was developed by CADC and integrated into STScI's pipeline.
The same harvester software is used by CADC and ESAC. 
STScI is also exploring how to use the harvester for internal testing.

\textbf{Have established check-ins}.
We have bi-weekly standup meetings with the core team to ensure we are on track. 
We also have yearly meetings with a broader group to highlight status and work towards future goals.

\textbf{Have a robust testing infrastructure}.
We have a variety of Python and Java validation tools for CAOM content. 
Each archive checks metadata independently, but also do cross-archive checks. 
We've created test databases with sample HST, JWST content for checks prior to installing pipelines in production machines.
We're working towards producing dashboards for quick verification of results.

\textbf{Document the process}.
Given the long span of this collaboration, we know that systems and staff change over time. 
Capturing how things work can make it easier to make changes in the future and train new staff.

\textbf{Enable future collaborations}.
We continue to build trust and confidence on top of the collaboration to enable future projects.

\section{Acknowledgments}

A large number of staff have participated in this project over the year. 
Here we acknowledge their contribution and list them.

At CADC, Patrick Dowler, Chris Willott, Daniel Durand, Severin Gaudet, JJ Kavelaars, David Schade, Ling Shao, and Hossen Teimoorinia.

At ESAC, Javier Espinosa, María Arévalo, Bruno Merín, Raúl Gutiérrez, Christophe Arviset, Deborah Baines, Felix Stoehr (former ST-ECF), Anthony Marston, Christopher Evans, Paule Sonnentrucker, Antonella Nota, and Daniel Lennon.

At STScI, Brian McLean, David Rodriguez, David Wolfe, Matt Burger, Faith Abney, Rick White, Travis Berger, Josh Peek, Susan Mullally, Jonathan Hargis, and Karen Levay.

%\acknowledgements The ASP would like to thank the dedicated researchers who are publishing with the ASP.  It will make things a lot easier if you keep this text on the same line as the \verb"\acknowledgements" command. Place it just before the bibliography. It's optional of course.

\bibliography{C502}  % For BibTex

% if we have space left, we might add a conference photograph here. Leave commented for now.
% \bookpartphoto[width=1.0\textwidth]{foobar.eps}{FooBar Photo (Photo: Any Photographer)}

\end{document}
